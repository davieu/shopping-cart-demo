(function(t){function r(r){for(var e,c,i=r[0],s=r[1],u=r[2],p=0,l=[];p<i.length;p++)c=i[p],a[c]&&l.push(a[c][0]),a[c]=0;for(e in s)Object.prototype.hasOwnProperty.call(s,e)&&(t[e]=s[e]);d&&d(r);while(l.length)l.shift()();return n.push.apply(n,u||[]),o()}function o(){for(var t,r=0;r<n.length;r++){for(var o=n[r],e=!0,i=1;i<o.length;i++){var s=o[i];0!==a[s]&&(e=!1)}e&&(n.splice(r--,1),t=c(c.s=o[0]))}return t}var e={},a={app:0},n=[];function c(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,c),o.l=!0,o.exports}c.m=t,c.c=e,c.d=function(t,r,o){c.o(t,r)||Object.defineProperty(t,r,{enumerable:!0,get:o})},c.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},c.t=function(t,r){if(1&r&&(t=c(t)),8&r)return t;if(4&r&&"object"===typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(c.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&r&&"string"!=typeof t)for(var e in t)c.d(o,e,function(r){return t[r]}.bind(null,e));return o},c.n=function(t){var r=t&&t.__esModule?function(){return t["default"]}:function(){return t};return c.d(r,"a",r),r},c.o=function(t,r){return Object.prototype.hasOwnProperty.call(t,r)},c.p="/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],s=i.push.bind(i);i.push=r,i=i.slice();for(var u=0;u<i.length;u++)r(i[u]);var d=s;n.push([0,"chunk-vendors"]),o()})({0:function(t,r,o){t.exports=o("56d7")},"2ce8":function(t,r,o){"use strict";var e=o("e43f"),a=o.n(e);a.a},"4c18":function(t,r,o){"use strict";var e=o("825d"),a=o.n(e);a.a},"56d7":function(t,r,o){"use strict";o.r(r);o("cadf"),o("551c"),o("f751"),o("097d");var e=o("2b0e"),a=function(){var t=this,r=t.$createElement,o=t._self._c||r;return o("div",{attrs:{id:"app"}},[o("div",{attrs:{id:"nav"}},[o("router-link",{attrs:{to:"/"}},[t._v("Home")]),t._v(" |\n    "),o("router-link",{attrs:{to:"/admin-page"}},[t._v("Admin Page")])],1),o("b-container",[o("router-view")],1)],1)},n=[],c=(o("5c0b"),o("2877")),i={},s=Object(c["a"])(i,a,n,!1,null,null,null),u=s.exports,d=o("8c4f"),p=function(){var t=this,r=t.$createElement,o=t._self._c||r;return o("div",{staticClass:"home"},[o("Products")],1)},l=[],m=function(){var t=this,r=t.$createElement,o=t._self._c||r;return o("div",[o("b-container",[o("div",{staticClass:"modal-div"},[o("b-row",[o("b-col",[t.productPromotionsActivated.length>0?o("b-button",{directives:[{name:"b-toggle",rawName:"v-b-toggle.collapse-a.collapse-b",modifiers:{"collapse-a":!0,"collapse-b":!0}}],attrs:{variant:"primary"}},[t._v("Special Offers!")]):t._e()],1),o("b-col",[o("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal.modal-1",modifiers:{"modal-1":!0}}],staticClass:"open-cart-btn",attrs:{variant:"primary"}},[t._v("Shopping Cart: "+t._s(t.getCartItemsLength))])],1)],1),t._l(t.displayPromotionsActivated,function(r,e){return o("b-collapse",{key:e,staticClass:"mt-2",attrs:{visible:"",id:"collapse-a"}},[o("b-card",{staticClass:"special-offers-cards"},[o("b",[t._v(t._s(r.productName)+":")]),t._v(" "+t._s(r.promotion)+"!")])],1)}),o("b-modal",{attrs:{id:"modal-1",size:"sm",title:"Cart"}},[t.getCartItemsLength>0?o("div",t._l(t.getShoppingCart,function(r,e){return o("div",{key:e},[t._v("\n          "+t._s(r.product.productName)+": "),o("span",{staticClass:"product-count"},[t._v(" "+t._s(r.product.count))]),o("div",{staticClass:"cart-btns"},[o("button",{staticClass:"in-cart-del-btn",attrs:{mb:"1"},on:{click:function(o){return t.decrementCart(r.product.productName,r.product.price)}}},[o("b",[t._v("-")])]),o("button",{staticClass:"in-cart-add-btn",on:{click:function(o){return t.incrementCart(r.product.productName,r.product.price)}}},[o("b",[t._v("+")])])])])}),0):t._e(),t.getCartItemsLength<1?o("div",[o("p",[t._v("Take a look around the Shop!")])]):t._e(),o("hr"),o("p",[t._v("Sub Total: "),o("span",{staticClass:"product-totals"},[t._v(t._s(t.getSubTotal))])]),o("p",[t._v("Tax: "),o("span",{staticClass:"product-totals"},[t._v(t._s(t.getTax))])]),o("p",[o("b",[t._v("Order Total:")]),o("span",{staticClass:"product-totals"},[o("b",[t._v(t._s(t.getOrderTotal))])])]),o("div",{staticClass:"w-100",attrs:{slot:"modal-footer"},slot:"modal-footer"},[o("p",{staticClass:"float-left"}),o("b-button",{staticClass:"float-right",attrs:{variant:"primary"},on:{checkout:function(r){t.show=!1}}},[t._v("\n        Checkout\n      ")])],1)])],2),o("b-row",{class:{noPromotions:t.productPromotionsActivated.length<1}},t._l(t.allProducts,function(r){return o("b-col",{key:r._id,attrs:{md:"4",xs:"12"}},[o("b-card-group",{staticClass:"mb-3",attrs:{deck:""}},[o("b-card",{staticClass:"text-center cards",attrs:{header:""+r.productName}},[t.promotionIconOnCard(r.productName)?o("span",{attrs:{title:"Promotion Available!"}},[t._v("⚡ ")]):t._e(),o("span",{staticClass:"price"},[t._v("Price: "+t._s(t.formatPrices(r.price))+" ")]),o("hr"),o("b-card-text",[t._v(t._s(r.description))]),o("b-button",{staticClass:"add-cart-btn",attrs:{variant:"success"},on:{click:function(o){return t.incrementCart(r.productName,r.price,r._id)}}},[t._v("Add to Cart!")])],1)],1)],1)}),1)],1)],1)},f=[],v=(o("6b54"),o("db72")),b=o("2f62"),g={name:"Products",data:function(){return{cart:null,cartArrays:[]}},methods:Object(v["a"])({},Object(b["b"])(["fetchProducts","addProductToCart","removeProductFromCart"]),{formatPrices:function(t){try{var r,o=t.toString(),e=o.indexOf(".");return r=-1==e?o+".00":"."==o[o.length-2]?o+"0":o,"$"+r}catch(a){}},incrementCart:function(t,r,o){var e={productName:t,price:r,id:o};this.addProductToCart(e)},decrementCart:function(t,r){var o={productName:t,price:r};this.removeProductFromCart(o)},promotionIconOnCard:function(t){for(var r=0;r<this.productPromotionsActivated.length;r++)if(t==this.productPromotionsActivated[r])return!0}}),computed:Object(v["a"])({},Object(b["c"])(["allProducts","getSubTotal","getTax","getOrderTotal","getShoppingCart","getCartItemsLength","displayPromotionsActivated"]),{},Object(b["d"])(["products","cartArray","typeOfProductCountInCart","productPromotionsActivated","promotions"])),created:function(){this.fetchProducts()}},h=g,C=(o("2ce8"),Object(c["a"])(h,m,f,!1,null,"02b60828",null)),P=C.exports,_={name:"home",components:{Products:P}},y=_,S=Object(c["a"])(y,p,l,!1,null,null,null),O=S.exports,N=function(){var t=this,r=t.$createElement,o=t._self._c||r;return o("div",{staticClass:"adminPage"},[o("FormSubmit")],1)},x=[],A=function(){var t=this,r=t.$createElement,o=t._self._c||r;return o("div",[o("h1",[t._v("Activate Promotions")]),o("div",{staticClass:"promotions-div"},[t._v("\n    "+t._s(t.promotions[0].promotionFunc())+"\n    "),o("b-button",{directives:[{name:"b-toggle",rawName:"v-b-toggle.collapse-1",modifiers:{"collapse-1":!0}}],attrs:{variant:"primary"}},[t._v("Promotions List:")]),o("b-collapse",{staticClass:"mt-2",attrs:{id:"collapse-1"}},[o("b-card",[o("b-form",{on:{submit:t.onPromotionsSubmit}},[o("b-form-group",{attrs:{id:"promotions-group"}},[o("p",[t._v("Select the promotions you want cusomers to use")]),t._l(t.promotions,function(r,e){return o("b-form-checkbox-group",{key:e,attrs:{id:"promotions-checkboxes"},model:{value:t.promotionSubmitData,callback:function(r){t.promotionSubmitData=r},expression:"promotionSubmitData"}},[o("b-form-checkbox",{attrs:{checked:"",value:r.productName}},[o("b",[t._v(t._s(r.productName))]),t._v(": "+t._s(r.promotion))])],1)}),o("b-button",{staticClass:"promotions-submit-btn",attrs:{type:"submit",variant:"success"}},[t._v("Submit")])],2)],1)],1)],1)],1),o("br"),o("hr"),o("h1",[t._v("Add Product")]),o("div",{staticClass:"products-list"},[o("b-form",{on:{submit:t.onPostSubmit}},[o("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.productName,expression:"formData.productName"}],staticClass:"input-field",attrs:{type:"text",required:"",placeholder:"Product name..."},domProps:{value:t.formData.productName},on:{input:function(r){r.target.composing||t.$set(t.formData,"productName",r.target.value)}}}),o("br"),o("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.price,expression:"formData.price"}],staticClass:"input-field",attrs:{type:"number",step:"0.01",required:"",placeholder:"Price..."},domProps:{value:t.formData.price},on:{input:function(r){r.target.composing||t.$set(t.formData,"price",r.target.value)}}}),o("br"),o("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.description,expression:"formData.description"}],staticClass:"input-field",attrs:{type:"text",required:"",placeholder:"Description..."},domProps:{value:t.formData.description},on:{input:function(r){r.target.composing||t.$set(t.formData,"description",r.target.value)}}}),o("br"),o("b-button",{attrs:{type:"submit",value:"Submit",variant:"success"}},[t._v("Submit")]),o("div",{staticClass:"error-handler-div",class:{success:t.getRequestStatus,error:!t.getRequestStatus}},[t.getRequestStatus?o("span",{staticClass:"err-symbol"},[o("b",[t._v("✔")])]):t._e(),!1===t.getRequestStatus?o("span",{staticClass:"err-symbol"},[o("b",[t._v(" X ")])]):t._e(),o("span",[t._v(" "+t._s(t.successOrErrorHandler))])])],1)],1),o("br"),o("hr"),o("h1",[t._v("Delete Product")]),o("div",{staticClass:"products-list"},[o("form",[o("input",{staticClass:"input-field",attrs:{type:"text",required:"",placeholder:"Product name..."}}),o("b-button",{attrs:{type:"submit",value:"Submit",variant:"success"}},[t._v("Submit")])],1)])])},w=[],T={name:"FormSubmit",data:function(){return{formData:{productName:"",price:"",description:""},promotionSubmitData:[]}},methods:Object(v["a"])({},Object(b["b"])(["addProduct","addPromotionToProduct"]),{onPostSubmit:function(t){t.preventDefault();var r=this.formData;this.addProduct(r)},onPromotionsSubmit:function(t){t.preventDefault();var r=this.promotionSubmitData;this.addPromotionToProduct(r)}}),computed:Object(v["a"])({},Object(b["c"])(["getErrorMsg","getRequestStatus"]),{},Object(b["d"])(["promotions","productPromotionsActivated"]),{successOrErrorHandler:function(){return this.getRequestStatus?"Product Added!":0==this.getRequestStatus?this.getErrorMsg:""}}),mounted:function(){this.promotionSubmitData=this.productPromotionsActivated}},j=T,k=(o("4c18"),Object(c["a"])(j,A,w,!1,null,"f13e4cd0",null)),D=k.exports,I={name:"adminPage",components:{FormSubmit:D}},$=I,q=Object(c["a"])($,N,x,!1,null,null,null),E=q.exports;e["default"].use(d["a"]);var F=new d["a"]({mode:"history",base:"/",routes:[{path:"/",name:"home",component:O},{path:"/admin-page",name:"admin-page",component:E}]}),M={initializeState:!0,products:[],errorMsg:"",requestStatus:null,cartArray:[],typeOfProductCountInCart:[],totalCost:0,productPromotionsActivated:[],promotions:[{productName:"Apple",promotionFunc:function(t){console.log("poop",this.productName)},promotion:"Buy one, get one free",isActivated:!1},{productName:"Orange",promotionFunc:function(t){console.log("poop2",this.productName)},promotion:"3 for the price of 2",isActivated:!1}]},R=(o("96cf"),o("3b8d")),L=o("bc3a"),z=o.n(L),H={fetchProducts:function(){var t=Object(R["a"])(regeneratorRuntime.mark(function t(r){var o,e;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return o=r.commit,t.next=3,z.a.get("api/products");case 3:e=t.sent,o("setProducts",e.data);case 5:case"end":return t.stop()}},t)}));function r(r){return t.apply(this,arguments)}return r}(),addProduct:function(){var t=Object(R["a"])(regeneratorRuntime.mark(function t(r,o){var e,a,n;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return e=r.commit,t.prev=1,t.next=4,z.a.post("api/product",o);case 4:a=t.sent,e("newProduct",a.data),t.next=12;break;case 8:t.prev=8,t.t0=t["catch"](1),n={errMsg:"Product name already in use.",err:t.t0},e("sendError",n.errMsg);case 12:case"end":return t.stop()}},t,null,[[1,8]])}));function r(r,o){return t.apply(this,arguments)}return r}(),addProductToCart:function(t,r){var o=t.commit;o("pushProductToCart",r)},removeProductFromCart:function(t,r){var o=t.commit;o("removeFromCart",r)},addPromotionToProduct:function(t,r){var o=t.commit;o("promotionActivated",r)}},J=(o("20d6"),o("ac6a"),{setProducts:function(t,r){if(r.forEach(function(t){var r=t.productName;t.productName=r[0].toUpperCase()+r.substring(1,r.length)}),t.initializeState){for(var o=0;o<r.length;o++)t.typeOfProductCountInCart.push({product:{productName:r[o].productName,count:0,inCart:!1,price:r[o].price}});console.log(t.typeOfProductCountInCart)}t.initializeState=!1,t.products=r},newProduct:function(t,r){setTimeout(function(){return t.requestStatus=null},1500);var o=r.productName[0].toUpperCase()+r.productName.substring(1,r.productName.length);t.typeOfProductCountInCart.push({product:{productName:o,count:0,inCart:!1,price:r.price}}),t.requestStatus=!0,t.errorMsg="",t.products.push(r)},sendError:function(t,r){t.requestStatus=!1,t.errorMsg=r,setTimeout(function(){return t.requestStatus=null},2e3)},pushProductToCart:function(t,r){t.cartArray.push(r.productName);var o=t.typeOfProductCountInCart.findIndex(function(t){return t.product.productName==r.productName});t.typeOfProductCountInCart[o].product.count+=1,t.typeOfProductCountInCart[o].product.inCart=!0,t.totalCost+=r.price,console.log(t.typeOfProductCountInCart),console.log(t.cartArray)},removeFromCart:function(t,r){var o=t.cartArray.indexOf(r.productName);t.cartArray.splice(o,1);var e=t.typeOfProductCountInCart.findIndex(function(t){return t.product.productName==r.productName});t.typeOfProductCountInCart[e].product.count-=1,0==t.typeOfProductCountInCart[e].product.count&&(t.typeOfProductCountInCart[e].product.inCart=!1),t.totalCost-=r.price},promotionActivated:function(t,r){t.productPromotionsActivated=[],t.promotions.forEach(function(t){return t.isActivated=!1}),r.forEach(function(r){return t.productPromotionsActivated.push(r)}),t.promotions.forEach(function(o){for(var e=0;e<t.promotions.length;e++)o.productName==r[e]&&(o.isActivated=!0);console.log(o.isActivated)}),console.log(t.promotions),console.log(t.productPromotionsActivated)}}),U={allProducts:function(t){return t.products},getErrorMsg:function(t){return t.errorMsg},getRequestStatus:function(t){return t.requestStatus},getShoppingCart:function(t){return t.typeOfProductCountInCart.filter(function(t){return 1==t.product.inCart})},getCartItemsLength:function(t){return t.cartArray.length},getSubTotal:function(t){var r="$".concat(t.totalCost.toFixed(2));return"$-0.00"==r?"$0.00":r},getTax:function(t){var r=.075*t.totalCost,o="$".concat(r.toFixed(2));return"$-0.00"==o?"$0.00":o},getOrderTotal:function(t){var r=.075*t.totalCost,o=r+t.totalCost,e="$".concat(o.toFixed(2));return"$-0.00"==e?"$0.00":e},displayPromotionsActivated:function(t){return t.promotions.filter(function(t){return 1==t.isActivated})}};e["default"].use(b["a"]);var B=new b["a"].Store({state:M,mutations:J,actions:H,getters:U}),X=o("5f5b");o("f9e3"),o("2dd8");e["default"].use(X["a"]),e["default"].config.productionTip=!1,new e["default"]({router:F,store:B,render:function(t){return t(u)}}).$mount("#app")},"5c0b":function(t,r,o){"use strict";var e=o("5e27"),a=o.n(e);a.a},"5e27":function(t,r,o){},"825d":function(t,r,o){},e43f:function(t,r,o){}});
//# sourceMappingURL=app.b07ca72e.js.map